<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <title>{{ app_name }} ‚Äî Status</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    :root{
      --bg:#0b0f17; --card:#101826; --text:#e8f0ff; --muted:#98abc5;
      --ok:#18c964; --warn:#f5a524; --err:#ff4d4f; --blue:#2f80ed; --vio:#8a63d2;
      --line:rgba(255,255,255,.08);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; display:grid; place-items:center;
      background:radial-gradient(1200px 800px at 20% -10%, #12203a 0%, #0b0f17 60%) fixed;
      color:var(--text); font:16px/1.5 system-ui,Segoe UI,Roboto,Ubuntu,sans-serif;
    }
    .card{
      width:min(900px,92vw);
      background:linear-gradient(180deg,rgba(255,255,255,.04),rgba(255,255,255,.02));
      border:1px solid var(--line); border-radius:16px; padding:32px;
      box-shadow:0 30px 80px rgba(0,0,0,.35);
      text-align:center;
    }
    h1{margin:0 0 12px; font-size:28px; letter-spacing:.3px}
    .subtitle{color:var(--muted);margin-bottom:24px}
    .status{
      display:inline-flex; align-items:center; gap:8px; margin-top:14px; padding:10px 16px;
      border-radius:999px; border:1px solid rgba(24,201,100,.35);
      color:#9ff3c6; background:rgba(24,201,100,.12); font-weight:600;
    }
    .actions{margin-top:24px;display:flex;gap:16px;justify-content:center}
    a{
      color:#cfe1ff; text-decoration:none; border:1px solid rgba(207,225,255,.2);
      padding:10px 18px; border-radius:10px; transition:.2s;
      background:rgba(255,255,255,.03);
    }
    a:hover{transform:translateY(-1px);border-color:rgba(207,225,255,.4);background:rgba(255,255,255,.06)}
    .stats-grid{
      display:grid; grid-template-columns:repeat(auto-fit, minmax(200px, 1fr));
      gap:16px; margin:28px 0;
    }
    .stat-card{
      background:rgba(0,0,0,.2); border:1px solid var(--line); border-radius:12px;
      padding:18px; text-align:center;
    }
    .stat-value{
      font-size:32px; font-weight:700; line-height:1;
      margin-bottom:8px;
    }
    .stat-label{
      color:var(--muted); font-size:14px; margin-bottom:4px;
    }
    .stat-desc{
      font-size:12px; color:var(--muted); opacity:.8;
    }
    .badge{
      display:inline-block; padding:4px 10px; border-radius:999px;
      font-size:12px; font-weight:500; margin-left:8px;
    }
    .badge.ok{background:rgba(24,201,100,.18);color:#7bf3b2;border:1px solid rgba(24,201,100,.35)}
    .badge.warn{background:rgba(245,165,36,.15);color:#ffc772;border:1px solid rgba(245,165,36,.35)}
    .badge.err{background:rgba(255,77,79,.15);color:#ffadad;border:1px solid rgba(255,77,79,.35)}
    .endpoints{
      background:rgba(0,0,0,.2); border:1px solid var(--line); border-radius:12px;
      padding:16px; margin-top:20px; text-align:left;
    }
    .endpoint{
      display:flex; justify-content:space-between; align-items:center;
      padding:8px 0; border-bottom:1px dashed rgba(255,255,255,.05);
    }
    .endpoint:last-child{border-bottom:none}
    .method{font-family:monospace;color:var(--vio);font-weight:500}
    .path{font-family:monospace;color:var(--text);flex-grow:1;margin-left:12px}
    .desc{color:var(--muted);font-size:13px}
    .version{color:var(--muted);font-size:12px;margin-top:20px}
  </style>
</head>
<body>
  <div class="card">
    <h1>{{ app_name }}</h1>
    <div class="subtitle">CamFinder API Server ‚Äî –ü–∞–Ω–µ–ª—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞</div>
    
    <div class="status">
      <span>‚úÖ –°–µ—Ä–≤–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ</span>
      <span class="badge ok">Online</span>
    </div>
    
    <div class="stats-grid">
      <div class="stat-card">
        <div class="stat-value">{{ stats.total_devices }}</div>
        <div class="stat-label">–í—Å–µ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤</div>
        <div class="stat-desc">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –≤ —Å–∏—Å—Ç–µ–º–µ</div>
      </div>
      
      <div class="stat-card">
        <div class="stat-value">{{ stats.active_subscriptions }}</div>
        <div class="stat-label">–ê–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–¥–ø–∏—Å–∫–∏</div>
        <div class="stat-desc">–ü–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞</div>
      </div>
      
      <div class="stat-card">
        <div class="stat-value">{{ stats.dev_mode }}</div>
        <div class="stat-label">DEV —Ä–µ–∂–∏–º</div>
        <div class="stat-desc">–ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π –¥–æ—Å—Ç—É–ø</div>
      </div>
      
      <div class="stat-card">
        <div class="stat-value">{{ stats.total_tx }}</div>
        <div class="stat-label">–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–π</div>
        <div class="stat-desc">–í—Å–µ–≥–æ –ø–ª–∞—Ç–µ–∂–µ–π</div>
      </div>
    </div>
    
    <div class="endpoints">
      <h3 style="margin-top:0;margin-bottom:12px">üì° –î–æ—Å—Ç—É–ø–Ω—ã–µ API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã</h3>
      <div class="endpoint">
        <span class="method">POST</span>
        <span class="path">/api/register_device</span>
        <span class="desc">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞</span>
      </div>
      <div class="endpoint">
        <span class="method">GET</span>
        <span class="path">/api/device_status</span>
        <span class="desc">–°—Ç–∞—Ç—É—Å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞</span>
      </div>
      <div class="endpoint">
        <span class="method">POST</span>
        <span class="path">/api/update_free_count</span>
        <span class="desc">–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–ø—ã—Ç–æ–∫</span>
      </div>
      <div class="endpoint">
        <span class="method">POST</span>
        <span class="path">/api/verify_payment</span>
        <span class="desc">–í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–ª–∞—Ç–µ–∂–∞</span>
      </div>
      <div class="endpoint">
        <span class="method">GET</span>
        <span class="path">/api/config</span>
        <span class="desc">–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è</span>
      </div>
      <div class="endpoint">
        <span class="method">GET</span>
        <span class="path">/api/subscriptions/status</span>
        <span class="desc">–°—Ç–∞—Ç—É—Å –ø–æ–¥–ø–∏—Å–∫–∏</span>
      </div>
    </div>
    
    <div class="actions">
      <a href="/admin/dashboard">üìä –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</a>
      <a href="/admin/config">‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è</a>
      <a href="/api/config" target="_blank">üìÑ API Config</a>
    </div>
    
    <div class="version">
      Server Version 1.0 ‚Ä¢ {{ stats.timestamp or "2024" }}
    </div>
  </div>
</body>
</html>
